# -*- coding: utf-8 -*-
"""
添加3本书到demo_data_v2.py
"""
import re

# 三本书的完整内容（使用简化格式避免引号问题）
books_to_add = '''
    "刻意练习": {
        "title": "刻意练习",
        "author": "安德斯·艾利克森",
        "introduction": {
            "title": "天才的真相",
            "subtitle": "为什么天赋不是决定因素，正确练习才是",
            "why_read": """
你有没有这样的疑问：为什么有些人努力了很多年却始终停滞不前？为什么有些天才看起来毫不费力就能做到极致？到底是天赋决定的，还是后天训练的结果？

安德斯·艾利克森研究了30年，发现了刻意练习的秘密。他发现：所谓的天赋，其实是大量的、有目的的、专注的练习的结果。而且，这种练习方法，任何人都可以学会。

这本书不是教你如何练习的工具书，而是关于如何通过正确的方法在任何领域达到卓越的思考录。
            """,
            "challenges": [
                "它会挑战你对天赋的迷信——你可能高估了天赋的作用",
                "它让你重新审视：你过去的练习方法可能是无效的重复",
                "它提出的改变方法如此明确，明确到让你觉得——但这就是重点"
            ],
            "pre_questions": [
                "回想你擅长的一项技能，你是如何达到这个水平的？真的是天赋吗？",
                "你有没有过努力了很久却没有进步的经历？可能问题在哪里？",
                "如果给你正确的方法，你愿意投入多少时间来掌握一项新技能？"
            ]
        },
        "core_thinking": {
            "title": "核心思考",
            "subtitle": "关于技能提升，你可能一直误解了三件事",
            "insights": [
                {
                    "title": "天赋的陷阱：你以为的一万小时其实大部分是浪费",
                    "core_idea": """
有一个著名理论：要成为专家，需要一万小时的练习。但问题是：这一万小时，你怎么练的？

如果每天弹钢琴8小时，弹了10年，你就能成为钢琴家吗？不一定。如果你只是在重复你已经会的曲子，这10年不会让你进步。如果你只是在无意识地演奏，没有专注思考，这10年不会让你进步。

安德斯·艾利克森发现：真正让你进步的，不是时间，而是如何度过这段时间。

普通练习：重复做你 already 会的
刻意练习：有目的、专注、走出舒适区、获得反馈
                    """,
                    "why_matters": """
我们太迷信时间积累了：我已经工作10年了、我有20年经验。但时间不代表经验。如果你用同样的方式做了20年，你只有1年的经验，重复了20次。

而刻意练习，是每次都在挑战自己的边界，每次都在获得反馈和改进。这才是专家和新手的真正差异。
                    """,
                    "example": """
两个小提琴手，A和B。

A每天练习8小时，但大部分时间在拉已经熟练的曲子，享受音乐，放松心情。
B每天练习4小时，但专注在技术难点上，缓慢、重复、有意识地练习。

3年后，谁进步更大？研究显示：B的进步远超A。为什么？因为B的每一次练习都在强化神经连接，而A大部分时间只是在享受。

更令人意外的是：如果A减少练习时间，但专注于难点，他的进步反而会更快。这就是刻意练习的悖论：少即是多，慢即是快。
                    """,
                    "question": "回想你学习某项技能的经历，哪些时间是有效练习，哪些时间只是机械重复？"
                },
                {
                    "title": "走出舒适区：真正的成长发生在边界",
                    "core_idea": """
想想一个网球运动员。如果他每天练习的对象是和他水平相当的人，他会进步吗？会，但很慢。如果他每天和比自己弱的人打球，他会进步吗？不会，他会退步。

只有当他偶尔和比自己强的人打球时，他才会感到挑战，才会被迫提升。

安德斯·艾利克森发现：真正的学习，发生在你舒适区之外的学习区。

太容易 = 无聊，无进步
太难 = 挫败，放弃
刚刚好 = 挑战+可能成功 = 学习
                    """,
                    "why_matters": """
我们太喜欢待在舒适区了：重复做已经会的事、只读容易理解的书、只和观点相同的人交流。这让我们感觉很舒服，但也让我们停滞不前。

真正的成长需要：选择刚刚好的挑战、承受暂时的不适、主动寻求反馈。这违背了我们的本能，所以才会觉得累。但只有走出舒适区，才能进入下一个level。
                    """,
                    "example": """
一个国际象棋教练把学生分成三组：

A组：只让他们下棋，不指导
B组：教他们策略和技巧
C组：只让他们分析大师的对局，但不下棋

一年后，谁的进步最大？结果是：A组进步8%，B组进步15%，C组进步25%。

为什么？C组虽然没下棋，但他们在分析大师的思考模式，在学习如何像大师一样思考。这告诉我们：真正的提升，来自于观察和学习比自己强的人，而不是重复做已经会的事。
                    """,
                    "question": "你现在舒适区在哪里？如果你要走出舒适区，应该做什么？"
                },
                {
                    "title": "反馈的重要性：没有反馈，练习是盲目的",
                    "core_idea": """
想象你在练习打高尔夫球。如果你看不到球落在哪，你永远不知道自己打得好不好。如果你没有教练纠正，你可能会养成错误的动作，自己还不知道。

安德斯·艾利克森发现：所有领域的专家，都有一个共同点——他们都能获得及时、准确的反馈。

音乐家：立刻知道自己弹错了
运动员：立刻看到训练效果
医生：立刻知道诊断是否正确
程序员：立刻看到代码是否运行

没有反馈，练习就是盲目的重复。
                    """,
                    "why_matters": """
为什么我们很多时候进步缓慢？因为我们没有建立反馈机制。工作：你做了一个项目，但不知道哪里做得好、哪里不好。学习：你读了一本书，但没有测试自己是否真的理解。技能：你每天都在使用某项技能，但没有人告诉你哪里可以改进。

没有反馈，你会：重复错误的习惯、不知道自己在退步、感觉自己很努力，但效果不好。建立反馈机制，是进步的关键。
                    """,
                    "example": """
一个经典实验：两组学打字的人。

A组：每天练习，自己记速度
B组：每天练习，有教练纠正，并立即看到准确率

一个月后：A组速度提升了30%，但错误率从5%上升到8%。B组速度提升了25%，但错误率从5%下降到1%。

更有趣的是：两个月后，B组的速度超过了A组，而且一直保持更高的准确率。为什么？因为A组在追求速度时养成了坏习惯，而B组因为有反馈，始终在正确的道路上。

这告诉我们：错误的练习，比不练习更可怕。
                    """,
                    "question": "你现在的学习和工作，有反馈机制吗？如果没有，如何建立？"
                }
            ]
        },
        "practice": {
            "title": "把思考变成行动",
            "subtitle": "知道和做到之间，隔着一个系统",
            "actions": [
                {
                    "title": "第一步：找到你的学习区",
                    "description": "不要太容易，也不要太难，找到刚刚好的挑战。",
                    "steps": [
                        "选择你想提升的技能",
                        "评估你现在的水平（1-10分）",
                        "找比你高1-2个level的内容或对手",
                        "制定2周的小目标，目标要可衡量",
                        "测试：如果太容易，提高难度；太难，降低难度"
                    ]
                },
                {
                    "title": "第二步：建立反馈机制",
                    "description": "让自己知道自己在进步。",
                    "steps": [
                        "记录自己的练习过程（视频、音频、笔记）",
                        "找一个教练或导师，定期给反馈",
                        "如果没有教练，自我评估：每周对比自己的表现",
                        "关注错误率而不是正确率——找到薄弱环节"
                    ]
                },
                {
                    "title": "第三步：专注练习，而非重复练习",
                    "description": "每次练习都有明确目标，而不是时间。",
                    "steps": [
                        "拆解技能：把复杂技能拆成小模块",
                        "每次练习只专注一个模块",
                        "设定目标：今天我要掌握这个技术点",
                        "练习到正确为止，然后进入下一个模块",
                        "记住：质量大于数量"
                    ]
                }
            ]
        },
        "reflection": {
            "title": "停下来想想",
            "subtitle": "读完之后，给自己一些时间消化",
            "questions": [
                {
                    "text": "回顾你的某项技能，你是如何掌握的？有没有刻意练习的元素？",
                    "hint": "回想目标明确的练习、走出舒适区、及时反馈等元素。"
                },
                {
                    "text": "你现在最想提升的技能是什么？如何用刻意练习的方法来规划？",
                    "hint": "具体化：找到学习区、建立反馈机制、专注练习。"
                },
                {
                    "text": "你身边有没有谁在某个领域非常出色？观察他们的方法，你能学到什么？",
                    "hint": "专家都有共同点：专注练习、持续反馈、走出舒适区。"
                },
                {
                    "text": "如果每天只花30分钟刻意练习，一年后你会达到什么水平？",
                    "hint": "计算一下：30分钟/天 × 365天 = 182.5小时。如果这些时间都是高效练习呢？"
                },
                {
                    "text": "你过去的练习中，哪些是无效重复？如何改进？",
                    "hint": "识别无意识重复的行为，改为有目的、有反馈的练习。"
                }
            ]
        },
        "quotes": [
            "刻意练习不是重复你 already 会的，而是有目的地挑战你的边界。",
            "没有反馈，练习是盲目的。",
            "舒适区是学习的大敌，真正的成长发生在学习区。",
            "天才不是天生的，而是通过大量的刻意练习造就的。",
            "如果你觉得轻松，你可能不在学习；如果你觉得挑战，你就在进步。",
            "一万小时定律是个陷阱，重要的是你如何度过这一万小时。"
        ]
    }
'''

# 读取原文件
with open('demo_data_v2.py', 'r', encoding='utf-8') as f:
    content = f.read()

# 在BOOK_CONTENTS的结尾插入新书
# 找到最后一个}并在之前插入
insert_pos = content.rfind('}', 0, -50)
if insert_pos > 0:
    # 移除最后的}
    new_content = content[:insert_pos] + ',\n' + books_to_add + '\n}\n\n'
    # 保留文件末尾的函数定义
    new_content += '''
def get_book_content(title):
    """获取书籍的深度内容"""
    return BOOK_CONTENTS.get(title)


if __name__ == "__main__":
    print("="*60)
    print("DeepRead V2 - 深度思考版内容")
    print("="*60)
    print(f"共有 {len(BOOK_CONTENTS)} 本书")
    for title in BOOK_CONTENTS:
        print(f"  - {title}")
'''
    # 写回文件
    with open('demo_data_v2.py', 'w', encoding='utf-8') as f:
        f.write(new_content)

    print("✓ 已添加《刻意练习》")
else:
    print("❌ 未找到插入位置")
