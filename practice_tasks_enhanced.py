# -*- coding: utf-8 -*-
"""
DeepRead 强化实践模块
将"知道"转化为"做到"的可追踪任务系统
"""

PRACTICE_TASKS = {
    "原子习惯": {
        "title": "《原子习惯》30天实践计划",
        "subtitle": "用30天养成第一个微习惯",
        "total_weeks": 4,

        "week_1": {
            "title": "第1周：用2分钟规则启动",
            "objective": "目标：选定习惯，用最小的行动启动它",
            "focus": "不要追求完美，追求开始",

            "daily_tasks": [
                {
                    "day": 1,
                    "task": "选定你的目标习惯",
                    "instruction": "从你想养成的习惯中，选1个最重要的",
                    "action_items": [
                        "列出3个你想养成的习惯",
                        "选择其中最重要的1个",
                        "写下为什么这个习惯对你重要"
                    ],
                    "checklist": [
                        "我选定的习惯：___________",
                        "这个习惯对我重要的原因：___________"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 2,
                    "task": "用2分钟规则定义你的习惯",
                    "instruction": "找到你习惯的2分钟版本——小到不可能失败",
                    "action_items": [
                        "思考：这个习惯最小可以小到什么程度？",
                        "定义：我每天只需要做___________（2分钟内）",
                        "记住：目标不是'做得好'，而是'每天做'"
                    ],
                    "examples": {
                        "读书": "翻开书，读1页",
                        "运动": "穿上跑鞋",
                        "冥想": "坐下，闭眼，呼吸1次",
                        "早起": "闹钟响后立即坐起来",
                        "写作": "打开文档，写1句话"
                    },
                    "checklist": [
                        "我的习惯：___________",
                        "2分钟版本：___________"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 3,
                    "task": "设计触发点（Habit Stacking）",
                    "instruction": "把新习惯绑定在旧习惯后面，利用'习惯堆叠'",
                    "action_items": [
                        "列出你每天一定会做的事（如：刷牙、吃早餐、睡觉前）",
                        "选择一个最合适的时间点",
                        "用这句话定义：[当/在旧习惯]之后，我[新习惯]"
                    ],
                    "examples": {
                        "早起读书": "当我刷完牙后，我翻开书读1页",
                        "运动": "当我吃完晚餐后，我穿上跑鞋",
                        "冥想": "当我躺在床上后，我闭上眼呼吸10次"
                    },
                    "checklist": [
                        "旧习惯（触发点）：___________",
                        "我的习惯公式：[当___________之后，我___________]"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 4,
                    "task": "优化环境",
                    "instruction": "让好习惯更容易看见和开始",
                    "action_items": [
                        "观察：你现在做这个习惯的障碍是什么？",
                        "做1个改变：移除障碍或增加触发点",
                        "测试：明天开始执行"
                    ],
                    "examples": {
                        "读书": "把书放在沙发显眼处，睡前1小时放床头",
                        "运动": "前一天晚上把运动服放在床边",
                        "早起": "手机放离床远的地方，闹钟响后必须起床才能关"
                    },
                    "checklist": [
                        "我的环境改变：___________",
                        "预期效果：___________"
                    ],
                    "time_estimate": "10分钟",
                    "completed": False
                },
                {
                    "day": 5,
                    "task": "第1次执行！",
                    "instruction": "按照触发点执行你的2分钟习惯",
                    "action_items": [
                        "等待触发点出现（如：刷完牙）",
                        "立即执行2分钟版本",
                        "完成后打钩✓"
                    ],
                    "reflection_questions": [
                        "我做到了吗？",
                        "触发点有效吗？",
                        "环境设置有帮助吗？",
                        "明天需要调整什么？"
                    ],
                    "checklist": [
                        "✓ 今天我完成了2分钟版本"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 6,
                    "task": "第2次执行 + 微调",
                    "instruction": "继续执行，根据昨天的经验微调",
                    "action_items": [
                        "执行你的2分钟习惯",
                        "观察：今天感觉如何？",
                        "调整：如果需要，微调触发点或环境"
                    ],
                    "checklist": [
                        "✓ 今天我完成了2分钟版本",
                        "我的调整：___________"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 7,
                    "task": "第1周复盘",
                    "instruction": "回顾这一周，庆祝成功，总结经验",
                    "reflection_questions": [
                        "我完成了几次？",
                        "触发点有效吗？哪个触发点最有效？",
                        "环境的改变有帮助吗？",
                        "最难的是什么？最容易的是什么？",
                        "下周继续，还是需要调整习惯？"
                    ],
                    "celebration": "如果你连续完成了7天，太棒了！你已经建立了习惯的雏形🎉",
                    "checklist": [
                        "本周完成次数：___/7",
                        "下周继续/调整习惯为：___________"
                    ],
                    "time_estimate": "10分钟",
                    "completed": False
                }
            ],

            "week_goal": "连续7天完成2分钟版本",
            "success_criteria": "至少完成5天"
        },

        "week_2": {
            "title": "第2周：稳定节奏",
            "objective": "目标：让习惯变得自动化",
            "focus": "不要增加时间，增加稳定性",

            "daily_tasks": [
                {
                    "day": 8,
                    "task": "开始自动化训练",
                    "instruction": "继续执行2分钟版本，但要有意识：让大脑自动执行",
                    "action_items": [
                        "执行你的习惯",
                        "观察：我需要多少意志力？",
                        "目标：让执行变得像刷牙一样自然"
                    ],
                    "tip": "如果某个时刻你忘记了，说明触发点还不够强，调整触发点",
                    "checklist": [
                        "✓ 今天我完成了2分钟版本",
                        "需要意志力：1-5分（1=完全自动，5=很费力）"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 9,
                    "task": "追踪你的意志力消耗",
                    "instruction": "记录执行这个习惯需要多少努力",
                    "action_items": [
                        "执行习惯",
                        "给意志力消耗打分（1-5）",
                        "思考：如何让它更轻松？"
                    ],
                    "checklist": [
                        "✓ 今天我完成了2分钟版本",
                        "意志力评分：___/5",
                        "让明天更轻松的方法：___________"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 10,
                    "task": "测试你的触发点",
                    "instruction": "当触发点出现时，你能自动开始吗？",
                    "action_items": [
                        "执行习惯",
                        "观察：触发点出现时，我想起新习惯了吗？",
                        "如果没想起，调整触发点的可见性"
                    ],
                    "checklist": [
                        "✓ 今天我完成了2分钟版本",
                        "触发点有效性：___/5",
                        "需要调整吗？是/否"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 11,
                    "task": "检查环境优化效果",
                    "instruction": "你之前的环境改变有效吗？",
                    "action_items": [
                        "执行习惯",
                        "观察：环境设置帮助你开始了吗？",
                        "如果无效，尝试新的环境改变"
                    ],
                    "examples": {
                        "如果书放在沙发看不到": "把书放在茶几上、电脑键盘上",
                        "如果运动服放在床边还是不想穿": "前一天晚上直接穿上运动服睡觉"
                    },
                    "checklist": [
                        "✓ 今天我完成了2分钟版本",
                        "环境设置评分：___/5",
                        "新的环境优化：___________"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 12,
                    "task": "自动化检查日",
                    "instruction": "你的习惯开始变得自动了吗？",
                    "action_items": [
                        "执行习惯",
                        "问自己：如果不打卡，我会忘记吗？",
                        "如果答案是'不会忘记'，恭喜，习惯正在固化"
                    ],
                    "milestone": "如果连续7天完成，你的习惯已经开始形成神经通路",
                    "checklist": [
                        "✓ 今天我完成了2分钟版本",
                        "感觉：很轻松/还可以/有点难"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 13,
                    "task": "稳定节奏强化",
                    "instruction": "继续执行，强化神经通路",
                    "action_items": [
                        "执行习惯",
                        "记住：重复是习惯之母",
                        "目标：让执行变得不需要思考"
                    ],
                    "checklist": [
                        "✓ 今天我完成了2分钟版本"
                    ],
                    "time_estimate": "2分钟",
                    "completed": False
                },
                {
                    "day": 14,
                    "task": "第2周复盘 + 决策",
                    "instruction": "评估习惯稳定度，决定下周策略",
                    "reflection_questions": [
                        "本周完成次数：___/7",
                        "连续完成天数：___天",
                        "意志力消耗趋势：下降/持平/上升",
                        "触发点稳定性：是否已经自动触发？",
                        "环境优化有效性：有帮助/没帮助"
                    ],
                    "decision": {
                        "如果连续≥5天且意志力≤3分": "下周可以延长时间到5分钟",
                        "如果完成<5天或意志力>3分": "下周继续2分钟，调整触发点或环境"
                    },
                    "checklist": [
                        "下周计划：[继续2分钟] / [延长到5分钟]",
                        "需要调整：___________"
                    ],
                    "time_estimate": "10分钟",
                    "completed": False
                }
            ],

            "week_goal": "让习惯变得自动化",
            "success_criteria": "连续5天以上，且意志力消耗≤3分"
        },

        "week_3": {
            "title": "第3周：逐步扩张（或继续巩固）",
            "objective": "目标：根据上周表现，决定延长或巩固",
            "focus": "不要急于求成，稳定第一",

            "path_a": {  # 如果第2周成功
                "title": "路径A：延长到5分钟",
                "condition": "连续≥5天且意志力≤3分",
                "daily_tasks": [
                    {
                        "day": 15,
                        "task": "延长到5分钟版本",
                        "instruction": "恭喜！你的2分钟版本已经稳定，现在延长到5分钟",
                        "action_items": [
                            "定义5分钟版本的习惯",
                            "保持相同的触发点",
                            "执行5分钟版本"
                        ],
                        "checklist": [
                            "5分钟版本：___________",
                            "✓ 今天完成5分钟"
                        ],
                        "time_estimate": "5分钟",
                        "completed": False
                    },
                    {
                        "day": 16,
                        "task": "5分钟版本 Day 2",
                        "instruction": "继续执行5分钟版本",
                        "checklist": [
                            "✓ 今天完成5分钟"
                        ],
                        "time_estimate": "5分钟",
                        "completed": False
                    },
                    {
                        "day": 17,
                        "task": "5分钟版本 Day 3",
                        "instruction": "继续执行5分钟版本",
                        "checklist": [
                            "✓ 今天完成5分钟"
                        ],
                        "time_estimate": "5分钟",
                        "completed": False
                    },
                    {
                        "day": 18,
                        "task": "5分钟版本 Day 4",
                        "instruction": "继续执行5分钟版本",
                        "checklist": [
                            "✓ 今天完成5分钟"
                        ],
                        "time_estimate": "5分钟",
                        "completed": False
                    },
                    {
                        "day": 19,
                        "task": "5分钟版本 Day 5",
                        "instruction": "继续执行5分钟版本",
                        "checklist": [
                            "✓ 今天完成5分钟"
                        ],
                        "time_estimate": "5分钟",
                        "completed": False
                    },
                    {
                        "day": 20,
                        "task": "5分钟版本 Day 6",
                        "instruction": "继续执行5分钟版本",
                        "checklist": [
                            "✓ 今天完成5分钟"
                        ],
                        "time_estimate": "5分钟",
                        "completed": False
                    },
                    {
                        "day": 21,
                        "task": "第3周复盘：评估扩张效果",
                        "instruction": "回顾延长后的执行情况",
                        "reflection_questions": [
                            "本周完成次数：___/7",
                            "5分钟版本的难度：___/5",
                            "我是否适应了新的时长？",
                            "下周继续延长/保持/回调到2分钟？"
                        ],
                        "checklist": [
                            "下周计划：[继续延长] / [保持5分钟] / [回调到2分钟]"
                        ],
                        "time_estimate": "10分钟",
                        "completed": False
                    }
                ]
            },

            "path_b": {  # 如果第2周不够稳定
                "title": "路径B：继续巩固2分钟",
                "condition": "完成<5天或意志力>3分",
                "daily_tasks": [
                    {
                        "day": 15,
                        "task": "诊断问题",
                        "instruction": "找出为什么2分钟版本还不够稳定",
                        "action_items": [
                            "回顾：哪些天没完成？为什么？",
                            "触发点问题？环境问题？还是时间问题？",
                            "做1个改变"
                        ],
                        "checklist": [
                            "问题诊断：___________",
                            "我的改变：___________"
                        ],
                        "time_estimate": "10分钟",
                        "completed": False
                    },
                    {
                        "day": 16,
                        "task": "用新策略执行",
                        "instruction": "用昨天的改变重新执行",
                        "checklist": [
                            "✓ 今天我完成了2分钟版本",
                            "新策略有效吗？是/否"
                        ],
                        "time_estimate": "2分钟",
                        "completed": False
                    },
                    {
                        "day": 17,
                        "task": "继续稳定节奏",
                        "instruction": "继续执行，目标是连续7天",
                        "checklist": [
                            "✓ 今天我完成了2分钟版本"
                        ],
                        "time_estimate": "2分钟",
                        "completed": False
                    },
                    {
                        "day": 18,
                        "task": "继续稳定节奏",
                        "instruction": "继续执行",
                        "checklist": [
                            "✓ 今天我完成了2分钟版本"
                        ],
                        "time_estimate": "2分钟",
                        "completed": False
                    },
                    {
                        "day": 19,
                        "task": "继续稳定节奏",
                        "instruction": "继续执行",
                        "checklist": [
                            "✓ 今天我完成了2分钟版本"
                        ],
                        "time_estimate": "2分钟",
                        "completed": False
                    },
                    {
                        "day": 20,
                        "task": "继续稳定节奏",
                        "instruction": "继续执行",
                        "checklist": [
                            "✓ 今天我完成了2分钟版本"
                        ],
                        "time_estimate": "2分钟",
                        "completed": False
                    },
                    {
                        "day": 21,
                        "task": "第3周复盘：巩固效果",
                        "instruction": "评估这周的巩固效果",
                        "reflection_questions": [
                            "本周完成次数：___/7",
                            "连续完成天数：___天",
                            "问题解决了吗？",
                            "下周准备延长吗？"
                        ],
                        "checklist": [
                            "下周计划：[继续2分钟] / [尝试延长]"
                        ],
                        "time_estimate": "10分钟",
                        "completed": False
                    }
                ]
            },

            "week_goal": "根据情况选择延长或巩固",
            "success_criteria": "找到适合自己的节奏"
        },

        "week_4": {
            "title": "第4周：习惯固化",
            "objective": "目标：让习惯成为你的一部分",
            "focus": "庆祝胜利，为长期持续做准备",

            "daily_tasks": [
                {
                    "day": 22,
                    "task": "30天习惯挑战启动",
                    "instruction": "进入最后冲刺，目标：连续30天完成",
                    "action_items": [
                        "执行你当前版本的习惯（2分钟或5分钟）",
                        "计算：如果从第1天开始每天都做，今天是第___天",
                        "目标：做到第30天"
                    ],
                    "motivation": "研究表明，连续21-30天，习惯开始固化",
                    "checklist": [
                        "✓ 今天我完成了",
                        "累计完成天数：___天"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 23,
                    "task": "倒计时开始：还有7天",
                    "instruction": "进入最后一周，坚持住！",
                    "checklist": [
                        "✓ 今天我完成了",
                        "累计完成天数：___天"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 24,
                    "task": "倒计时：还有6天",
                    "instruction": "继续执行",
                    "checklist": [
                        "✓ 今天我完成了",
                        "累计完成天数：___天"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 25,
                    "task": "倒计时：还有5天",
                    "instruction": "继续执行",
                    "checklist": [
                        "✓ 今天我完成了",
                        "累计完成天数：___天"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 26,
                    "task": "倒计时：还有4天",
                    "instruction": "继续执行",
                    "checklist": [
                        "✓ 今天我完成了",
                        "累计完成天数：___天"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 27,
                    "task": "倒计时：还有3天",
                    "instruction": "继续执行",
                    "checklist": [
                        "✓ 今天我完成了",
                        "累计完成天数：___天"
                    ],
                    "time_estimate": "5分钟",
                    "completed": False
                },
                {
                    "day": 28,
                    "task": "30天达成！🎉",
                    "instruction": "恭喜你完成了30天习惯挑战！",
                    "celebration": "你做到了！30天的坚持，这个习惯已经开始固化",
                    "reflection_questions": [
                        "30天里，我完成了___天",
                        "最难的是什么时候？",
                        "最有效的策略是什么？",
                        "这个习惯现在感觉如何？",
                        "我会继续吗？"
                    ],
                    "next_steps": [
                        "你可以选择：继续当前习惯、开始新习惯、或延长时长"
                    ],
                    "badge": "🏆 习惯养成徽章：30天挑战成功！",
                    "checklist": [
                        "我会[继续这个习惯] / [开始新习惯] / [延长时长]"
                    ],
                    "time_estimate": "15分钟",
                    "completed": False
                },
                {
                    "day": 29,
                    "task": "复盘整个30天旅程",
                    "instruction": "深度回顾这30天的改变",
                    "reflection_questions": [
                        "第1周 vs 现在，我的行为改变了吗？",
                        "这个习惯对我的生活有什么影响？",
                        "我学到了什么关于自己？",
                        "我学到了什么关于习惯？",
                        "我会把这个习惯推荐给他人吗？为什么？"
                    ],
                    "checklist": [
                        "我的3个关键发现：1.___________ 2.___________ 3.___________"
                    ],
                    "time_estimate": "20分钟",
                    "completed": False
                },
                {
                    "day": 30,
                    "task": "长期规划",
                    "instruction": "为未来90天做规划",
                    "action_items": [
                        "这个习惯会继续吗？会/否",
                        "如果会，我承诺再坚持90天",
                        "如果否，我学到了什么可以应用到下一个习惯？",
                        "写下你的承诺"
                    ],
                    "commitment": "我，[你的名字]，承诺在接下来的90天里，[你的承诺]",
                    "checklist": [
                        "我的90天承诺：___________"
                    ],
                    "time_estimate": "15分钟",
                    "completed": False
                }
            ],

            "week_goal": "完成30天挑战，习惯固化",
            "success_criteria": "完成30天中的至少25天"
        },

        "tools": {
            "daily_checklist": """
# 📋 每日打卡表

日期：___________

## ✅ 今日任务
[ ] 1. 触发点出现了吗？
[ ] 2. 我立即执行了吗？
[ ] 3. 完成了吗？

## 📊 数据记录
- 完成情况：完成 / 未完成
- 意志力消耗（1-5）：___
- 触发点有效性（1-5）：___
- 环境设置有帮助吗：是 / 否

## 💡 今日观察
- 最顺利的部分：___________
- 遇到的困难：___________
- 明天可以优化：___________

## 🎯 明天承诺
我承诺明天会完成这个习惯，因为：___________
            """,

            "weekly_review": """
# 📊 周复盘模板

## 本周数据
- 完成天数：___/7
- 连续完成：___天
- 平均意志力：___/5

## 本周亮点
- 我做得最好的地方：___________
- 最有效的策略：___________

## 本周挑战
- 最困难的部分：___________
- 哪些天没完成，为什么：___________

## 下周计划
- 继续当前版本 / 延长时间 / 调整习惯
- 具体调整：___________
            """,

            "30_day_tracker": """
# 🎯 30天追踪表

## 目标习惯
习惯：___________
2分钟版本：___________
触发点：[当___________之后，我___________]

## 完成记录
Week 1: [ ] [ ] [ ] [ ] [ ] [ ] [ ]  → ___/7
Week 2: [ ] [ ] [ ] [ ] [ ] [ ] [ ]  → ___/7
Week 3: [ ] [ ] [ ] [ ] [ ] [ ] [ ]  → ___/7
Week 4: [ ] [ ] [ ] [ ] [ ] [ ] [ ]  → ___/7

总计：___/30

## 成就徽章
[ ] 7天连续 → 🌱 习惯萌芽
[ ] 14天连续 → 🌿 习惯生长
[ ] 21天连续 → 🌳 习惯稳固
[ ] 30天完成 → 🏆 习惯养成

## 关键数据
- 总完成率：___%
- 最长连续天数：___天
- 平均意志力消耗：___/5
            """
        }
    }
}
